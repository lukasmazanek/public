<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GCC Storage MVP2 - Data Model Analysis</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif;
            font-size: 16px;
            line-height: 1.5;
            max-width: 980px;
            margin: 0 auto;
            padding: 45px;
            color: #1f2328;
        }
        h1, h2, h3, h4, h5, h6 {
            margin-top: 24px;
            margin-bottom: 16px;
            font-weight: 600;
            line-height: 1.25;
            border-bottom: 1px solid #d1d9e0;
            padding-bottom: .3em;
        }
        h1 { font-size: 2em; }
        h2 { font-size: 1.5em; }
        h3 { font-size: 1.25em; border-bottom: none; }
        h4, h5, h6 { border-bottom: none; }
        a { color: #0969da; text-decoration: none; }
        a:hover { text-decoration: underline; }
        pre {
            background: #f6f8fa;
            padding: 16px;
            overflow: auto;
            border-radius: 6px;
            font-size: 85%;
            line-height: 1.45;
        }
        code {
            background: rgba(175,184,193,0.2);
            padding: .2em .4em;
            border-radius: 6px;
            font-size: 85%;
        }
        pre code { background: none; padding: 0; font-size: 100%; }
        table {
            border-collapse: collapse;
            width: 100%;
            margin: 16px 0;
        }
        th, td {
            border: 1px solid #d1d9e0;
            padding: 6px 13px;
        }
        th { background: #f6f8fa; font-weight: 600; }
        tr:nth-child(2n) { background: #f6f8fa; }
        blockquote {
            border-left: .25em solid #d1d9e0;
            margin: 0;
            padding: 0 1em;
            color: #656d76;
        }
        hr { border: none; border-top: 1px solid #d1d9e0; margin: 24px 0; }
        ul, ol { padding-left: 2em; }
        li + li { margin-top: .25em; }
    </style>
</head>
<body>
<h1>GCC Storage MVP2 - Data Model Analysis</h1>
<blockquote>
<p><strong>Source:</strong> Scan 8. 1. 2026 at 13.05.pdf (Vil Shakirov, 07.01.2026)
<strong>Captured:</strong> 2026-01-08
<strong>Domain:</strong> MIB (likely Credit/Risk subdomain)</p>
</blockquote>
<hr>
<h2>Business Requirements</h2>
<ol>
<li>Store GCC group generated in MS PaaS application process</li>
<li>Read names of GCC members for external account incomes calculation</li>
<li>Data model able to store for advanced GCC 2.0</li>
<li>Data model usable for separate GCC component in the future</li>
</ol>
<hr>
<h2>Conceptual Data Model (ERD)</h2>
<h3>Core Entities</h3>
<table>
<thead>
<tr>
<th>Entity</th>
<th>Description</th>
<th>Key Attributes</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Request</strong></td>
<td>API request entry point</td>
<td>request_id, application_id, subject_id, cribis_moc_request_id, request_datetime</td>
</tr>
<tr>
<td><strong>Relation</strong></td>
<td>Relationship between subjects</td>
<td>relation_name, relation_type, relation_start_date, parent_id, child_id, cribis_relation_id, historic</td>
</tr>
<tr>
<td><strong>Subject</strong></td>
<td>Party/entity in GCC</td>
<td>party_id, name, cocunut_id, country_code, address, cribis_id, gcc_head_flag</td>
</tr>
</tbody></table>
<h3>Relation Subtypes (Disjoint)</h3>
<table>
<thead>
<tr>
<th>Subtype</th>
<th>Description</th>
<th>Key Attributes</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Ownership</strong></td>
<td>Ownership relation</td>
<td>shares_percentage, deposit, currency</td>
</tr>
<tr>
<td><strong>Control Relation</strong></td>
<td>Control without ownership</td>
<td>(marker only)</td>
</tr>
</tbody></table>
<h3>Subject Subtypes (Disjoint)</h3>
<table>
<thead>
<tr>
<th>Subtype</th>
<th>Description</th>
<th>Key Attributes</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Natural Person</strong></td>
<td>Individual</td>
<td>first_name, last_name, date_of_birth</td>
</tr>
<tr>
<td><strong>Commercial Subject</strong></td>
<td>Legal entity</td>
<td>business_id_number, tax_id_number</td>
</tr>
</tbody></table>
<h3>Related Entities</h3>
<table>
<thead>
<tr>
<th>Entity</th>
<th>Description</th>
<th>Cardinality</th>
</tr>
</thead>
<tbody><tr>
<td><strong>Financials</strong></td>
<td>Financial parameters</td>
<td>0..* per Commercial Subject</td>
</tr>
</tbody></table>
<hr>
<h2>Logical Data Model (Physical Schema)</h2>
<h3>Tables</h3>
<h4><code>requests</code></h4>
<pre><code>PK  request_id: bigint
    application_id: varchar(50)
    party_id: varchar(50)
    source_name: varchar(50)
    source_id: varchar(50)
    request_date: date
</code></pre>
<h4><code>relations</code></h4>
<pre><code>PK  relation_id: bigint
FK  request_id: bigint
    reliability_id: varchar(2)
    historic: boolean = false
FK  parent_subject_id: bigint
FK  child_subject_id: bigint
    source_relation_id: varchar(50)
    source_name: varchar(50)
    relation_type: varchar(50)
    relation_name: varchar(50)
    relation_start_date: date
    parent_party_id: varchar(50)
    child_party_id: varchar(50)
</code></pre>
<h4><code>subjects</code></h4>
<pre><code>PK  subject_id: bigint
    party_id: varchar(50) [UNIQUE]
    source_id: varchar(50)
    source_name: varchar(50)
    type: varchar(50)
    cocunut_id: varchar(50)
    country_code: varchar(50)
    address: text
    name: varchar(50)
    is_head_of_gcc: boolean = false
</code></pre>
<h4><code>ownerships</code> (extends relations)</h4>
<pre><code>FK  relation_id: bigint
    shares_percentage: numeric
    deposit: numeric
    currency: varchar(3)
</code></pre>
<h4><code>control_relations</code> (extends relations)</h4>
<pre><code>FK  relation_id: bigint
</code></pre>
<h4><code>individuals</code> (extends subjects)</h4>
<pre><code>FK  subject_id: bigint
    first_name: varchar(50)
    last_name: varchar(50)
    date_of_birth: date
</code></pre>
<h4><code>commercials</code> (extends subjects)</h4>
<pre><code>FK  subject_id: bigint
    business_id_number: varchar(50) [UNIQUE]
    tax_id_number: varchar(50) [UNIQUE]
</code></pre>
<h4><code>financials</code></h4>
<pre><code>PK  fin_id: bigint
FK  subject_id: bigint
    to_date: date
    period: varchar(50)
    parameter_name: varchar(50)
    parameter_amount: numeric
</code></pre>
<h3>Junction Table</h3>
<h4><code>application_subjects</code></h4>
<p>Links requests to subjects (used by GET request)</p>
<hr>
<h2>API Operations</h2>
<table>
<thead>
<tr>
<th>Operation</th>
<th>Tables Used</th>
</tr>
</thead>
<tbody><tr>
<td><code>POST request</code></td>
<td>requests</td>
</tr>
<tr>
<td><code>upsert_request</code></td>
<td>requests</td>
</tr>
<tr>
<td><code>upsert_relation</code></td>
<td>relations</td>
</tr>
<tr>
<td><code>upsert_subject</code></td>
<td>subjects</td>
</tr>
<tr>
<td><code>GET request</code></td>
<td>application_subjects → subjects</td>
</tr>
</tbody></table>
<hr>
<h2>Cardinalities</h2>
<pre><code>Request 1 ←──────── 0..* Relation
Relation 0..* ────→ 1 Subject (parent)
Relation 0..* ────→ 1 Subject (child)
Subject 1 ←──────── 0..1 Individual
Subject 1 ←──────── 0..1 Commercial
Subject 1 ←──────── 0..* Financials
Relation 1 ←─────── 0..1 Ownership
Relation 1 ←─────── 0..1 Control Relation
</code></pre>
<hr>
<h2>Data Mesh Analysis Notes</h2>
<h3>Potential Data Products</h3>
<table>
<thead>
<tr>
<th>DP Candidate</th>
<th>Layer</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>dp-gcc-group</code></td>
<td>L2 Aggregate</td>
<td>GCC group structure with members and relations</td>
</tr>
<tr>
<td><code>dp-gcc-member</code></td>
<td>L1 Core</td>
<td>Individual GCC member (subject)</td>
</tr>
<tr>
<td><code>dp-gcc-ownership</code></td>
<td>L2 Derived</td>
<td>Ownership chain analysis</td>
</tr>
</tbody></table>
<h3>Domain Ownership</h3>
<ul>
<li><strong>Suggested Domain:</strong> <code>RBCZ:MIB:Credit</code> or <code>RBCZ:MIB:Risk</code></li>
<li><strong>GCC</strong> = Group of Connected Clients (regulatory/risk concept)</li>
<li>Cross-references: Party (enterprise), Country (reference)</li>
</ul>
<h3>FIBO Alignment Candidates</h3>
<table>
<thead>
<tr>
<th>Concept</th>
<th>FIBO Candidate</th>
</tr>
</thead>
<tbody><tr>
<td>Subject</td>
<td>fibo-fnd:Party</td>
</tr>
<tr>
<td>Natural Person</td>
<td>fibo-fnd:NaturalPerson</td>
</tr>
<tr>
<td>Commercial Subject</td>
<td>fibo-fnd:LegalEntity</td>
</tr>
<tr>
<td>Ownership</td>
<td>fibo-be:Ownership</td>
</tr>
<tr>
<td>Control Relation</td>
<td>fibo-be:Control</td>
</tr>
</tbody></table>
<h3>Quality Observations</h3>
<ol>
<li><strong>Good:</strong> Clear separation of concerns (request, relation, subject)</li>
<li><strong>Good:</strong> Subtype pattern for polymorphic entities</li>
<li><strong>Note:</strong> <code>reliability_id</code> varchar(2) - should be reference data</li>
<li><strong>Note:</strong> <code>type</code> in subjects - should align with subtype tables</li>
<li><strong>Note:</strong> Multiple <code>source_*</code> fields - lineage tracking</li>
</ol>
<hr>
<h2>Next Steps</h2>
<ul>
<li><input disabled="" type="checkbox"> Confirm domain placement (Credit vs Risk)</li>
<li><input disabled="" type="checkbox"> Create Data Contract YAML</li>
<li><input disabled="" type="checkbox"> Map to FIBO ontology</li>
<li><input disabled="" type="checkbox"> Define DP boundaries and consumers</li>
</ul>

</body></html>
